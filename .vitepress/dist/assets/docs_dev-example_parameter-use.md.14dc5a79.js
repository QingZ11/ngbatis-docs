import{_ as s,o as a,c as n,O as l}from"./chunks/framework.786f5604.js";const A=JSON.parse('{"title":"如何传入参数","description":"","frontmatter":{},"headers":[],"relativePath":"docs/dev-example/parameter-use.md","filePath":"docs/dev-example/parameter-use.md"}'),o={name:"docs/dev-example/parameter-use.md"},e=l(`<h1 id="如何传入参数" tabindex="-1">如何传入参数 <a class="header-anchor" href="#如何传入参数" aria-label="Permalink to &quot;如何传入参数&quot;">​</a></h1><p>通过【<a href="./custom-crud.html">自定义nGQL</a>】我们已经知道了如何使自己编写的 <code>nGQL | cypher</code> 如何通过 java 调用并执行到 nebula 中。<br> 接下来，将在当前部分介绍如何对自己编写的语句进行传参。</p><blockquote><p><strong>注意</strong>：所有参数基本类型目前只支持包装类，如 int 需要写成 Integer。</p></blockquote><h2 id="在-ngql-cypher-中读取参数" tabindex="-1">在 <code>nGQL | cypher</code> 中读取参数 <a class="header-anchor" href="#在-ngql-cypher-中读取参数" aria-label="Permalink to &quot;在 \`nGQL | cypher\` 中读取参数&quot;">​</a></h2><h2 id="具名参数" tabindex="-1">具名参数 <a class="header-anchor" href="#具名参数" aria-label="Permalink to &quot;具名参数&quot;">​</a></h2><blockquote><p>参数被 @Param 所注解。org.springframework.data.repository.query.Param</p></blockquote><h4 id="简单类型" tabindex="-1">简单类型 <a class="header-anchor" href="#简单类型" aria-label="Permalink to &quot;简单类型&quot;">​</a></h4><ul><li><p>PersonDao.java</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// org.springframework.data.repository.query.Param</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">selectByName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Param</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> param </span><span style="color:#89DDFF;">);</span></span></code></pre></div></li><li><p>PersonDao.xml</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectByName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    MATCH (n: person)</span></span>
<span class="line"><span style="color:#A6ACCD;">    WHERE n.person.name == \${ name }</span></span>
<span class="line"><span style="color:#A6ACCD;">    RETURN n</span></span>
<span class="line"><span style="color:#A6ACCD;">    LIMIT 1</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h4 id="pojo-或-map" tabindex="-1">POJO 或 Map <a class="header-anchor" href="#pojo-或-map" aria-label="Permalink to &quot;POJO 或 Map&quot;">​</a></h4><ul><li>PersonDao.java<div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// org.springframework.data.repository.query.Param</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">selectByName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Param</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">person</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> person </span><span style="color:#89DDFF;">);</span></span></code></pre></div></li><li>PersonDao.xml<div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectByName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    MATCH (n: person)</span></span>
<span class="line"><span style="color:#A6ACCD;">    WHERE n.person.name == \${ person.name }</span></span>
<span class="line"><span style="color:#A6ACCD;">    RETURN n</span></span>
<span class="line"><span style="color:#A6ACCD;">    LIMIT 1</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><blockquote><p>参数读取支持 <code>.</code> 运算符，如果是 POJO 或 Map，可以直接读取内部属性</p></blockquote><h2 id="匿名参数" tabindex="-1">匿名参数 <a class="header-anchor" href="#匿名参数" aria-label="Permalink to &quot;匿名参数&quot;">​</a></h2><ul><li>如果在接口中声明的参数中，不带 @Param 注解，则使用下标位进行获取，即 $p0、$p1、$p2、$p3 ...</li><li>参数列表长度为1，类型为 POJO 或 Map 时，可直接读取属性</li></ul><h4 id="基本类型" tabindex="-1">基本类型 <a class="header-anchor" href="#基本类型" aria-label="Permalink to &quot;基本类型&quot;">​</a></h4><ul><li><p>PersonDao.java</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">selectByName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> name </span><span style="color:#89DDFF;">);</span></span></code></pre></div></li><li><p>PersonDao.xml</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectByName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    MATCH (n: person)</span></span>
<span class="line"><span style="color:#A6ACCD;">    WHERE n.person.name == $p0</span></span>
<span class="line"><span style="color:#A6ACCD;">    RETURN n</span></span>
<span class="line"><span style="color:#A6ACCD;">    LIMIT 1</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h4 id="pojo-或-map-1" tabindex="-1">POJO 或 Map <a class="header-anchor" href="#pojo-或-map-1" aria-label="Permalink to &quot;POJO 或 Map&quot;">​</a></h4><h5 id="参数只有一个时" tabindex="-1">参数只有一个时： <a class="header-anchor" href="#参数只有一个时" aria-label="Permalink to &quot;参数只有一个时：&quot;">​</a></h5><ul><li>PersonDao.java<div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">selectByName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> person </span><span style="color:#89DDFF;">);</span></span></code></pre></div></li><li>PersonDao.xml<div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectByName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    MATCH (n: person)</span></span>
<span class="line"><span style="color:#A6ACCD;">    WHERE n.person.name == $name</span></span>
<span class="line"><span style="color:#A6ACCD;">    RETURN n</span></span>
<span class="line"><span style="color:#A6ACCD;">    LIMIT 1</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h5 id="参数有两个及以上时" tabindex="-1">参数有两个及以上时： <a class="header-anchor" href="#参数有两个及以上时" aria-label="Permalink to &quot;参数有两个及以上时：&quot;">​</a></h5><ul><li>PersonDao.java<div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// params = { age: 18 }</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">selectByName</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> person</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Map</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">String</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Object</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> params </span><span style="color:#89DDFF;">);</span></span></code></pre></div></li><li>PersonDao.xml<div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectByName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        MATCH (n: person)</span></span>
<span class="line"><span style="color:#A6ACCD;">        WHERE n.person.name == $p0.name</span></span>
<span class="line"><span style="color:#A6ACCD;">        AND n.person.age &gt; $p1.age</span></span>
<span class="line"><span style="color:#A6ACCD;">        RETURN n</span></span>
<span class="line"><span style="color:#A6ACCD;">        LIMIT 1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h2 id="集合类型的参数获取-与基本类型一致。" tabindex="-1">集合类型的参数获取，与基本类型一致。 <a class="header-anchor" href="#集合类型的参数获取-与基本类型一致。" aria-label="Permalink to &quot;集合类型的参数获取，与基本类型一致。&quot;">​</a></h2><ul><li>匿名时，使用 $p0，$p1，...</li><li>具名时，直接使用注解内的参数名</li><li>如果是基本类型的集合，不需要做复杂处理，可以直接传入</li></ul><hr><ul><li>PersonDao.java<div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Person</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">findByIds</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">String</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> names </span><span style="color:#89DDFF;">);</span></span></code></pre></div></li><li>PersonDao.xml<div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">findByIds</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">resultType</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your.domain.Person</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        MATCH (n: person)</span></span>
<span class="line"><span style="color:#A6ACCD;">        WHERE id(n) in $p0</span></span>
<span class="line"><span style="color:#A6ACCD;">        RETURN n</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><ul><li>两种占位符格式： <ul><li><code>\${ 参数名.子参数名 }</code> ngbatis 的占位符，执行到数据库前完成替换</li><li><code>{ 参数名.子参数名 }</code> NebulaGraph 的占位符，由数据库完成替换，但需要注意支持参数化的位置。</li></ul></li><li>特殊符号问题： <ul><li>可以使用内置函数进行转义 <code>\${ ng.valueFmt( 参数名 ) }</code>，该函数同样无需判断数据类型。如是字符串也无需加前后引号</li></ul></li></ul><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>到此，关于参数获取的大致介绍完毕。如果有关于获取参数后的条件控制以及遍历的需求，请移步【<a href="./parameter-if.html">参数条件控制</a>】、【<a href="./parameter-for.html">参数遍历</a>】</p>`,28),p=[e];function t(c,r,i,D,y,F){return a(),n("div",null,p)}const d=s(o,[["render",t]]);export{A as __pageData,d as default};
