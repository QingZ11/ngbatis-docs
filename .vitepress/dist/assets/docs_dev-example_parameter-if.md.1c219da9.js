import{_ as s,o as a,c as n,O as l}from"./chunks/framework.786f5604.js";const F=JSON.parse('{"title":"条件控制","description":"","frontmatter":{},"headers":[],"relativePath":"docs/dev-example/parameter-if.md","filePath":"docs/dev-example/parameter-if.md"}'),p={name:"docs/dev-example/parameter-if.md"},e=l(`<h1 id="条件控制" tabindex="-1">条件控制 <a class="header-anchor" href="#条件控制" aria-label="Permalink to &quot;条件控制&quot;">​</a></h1><blockquote><p>语法参考【<a href="https://www.kancloud.cn/xiandafu/beetl3_guide/2138953" target="_blank" rel="noreferrer">Beetl 条件控制</a>】 因配置的差异，文档中如涉及界定符，则由文档中的 &lt;% %&gt; 替换成 @，如：</p></blockquote><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> &lt;%if ( aBool ) { </span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#F07178;">                         </span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> } %&gt;                </span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#C3E88D;"> @if ( aBool ) {</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#C3E88D;">                       </span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#C3E88D;"> @}</span></span></code></pre></div><h2 id="三元表达式的使用" tabindex="-1">三元表达式的使用 <a class="header-anchor" href="#三元表达式的使用" aria-label="Permalink to &quot;三元表达式的使用&quot;">​</a></h2><ul><li><p>PersonDao.java</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">selectByNameIfNotEmpty</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> name </span><span style="color:#89DDFF;">);</span></span></code></pre></div></li><li><p>PersonDao.xml</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectByNameIfNotEmpty</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        MATCH (n: person)</span></span>
<span class="line"><span style="color:#A6ACCD;">        WHERE 1 == 1 </span></span>
<span class="line"><span style="color:#A6ACCD;">        \${ isEmpty( p0 ) ? &#39;&#39; : &#39;AND n.person.name == $p0&#39; }</span></span>
<span class="line"><span style="color:#A6ACCD;">        RETURN n</span></span>
<span class="line"><span style="color:#A6ACCD;">        LIMIT 1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h2 id="if-的使用" tabindex="-1">if 的使用 <a class="header-anchor" href="#if-的使用" aria-label="Permalink to &quot;if 的使用&quot;">​</a></h2><ul><li>PersonDao.java<div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// params = { age: 18 }</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">selectByNameAndAge</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> person</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Map</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">String</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Object</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> params </span><span style="color:#89DDFF;">);</span></span></code></pre></div></li><li>PersonDao.xml<div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectByNameAndAge</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      MATCH (n: person)</span></span>
<span class="line"><span style="color:#A6ACCD;">      WHERE 1 == 1</span></span>
<span class="line"><span style="color:#A6ACCD;">      @if ( isNotEmpty( $p0.name ) ) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        AND n.person.name == $p0.name</span></span>
<span class="line"><span style="color:#A6ACCD;">      @}</span></span>
<span class="line"><span style="color:#A6ACCD;">      @if ( isNotEmpty( $p1.age ) ) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        AND n.person.age &gt; $p1.age</span></span>
<span class="line"><span style="color:#A6ACCD;">      @}</span></span>
<span class="line"><span style="color:#A6ACCD;">      RETURN n</span></span>
<span class="line"><span style="color:#A6ACCD;">      LIMIT 1</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h2 id="if-else-的使用" tabindex="-1">if-else 的使用 <a class="header-anchor" href="#if-else-的使用" aria-label="Permalink to &quot;if-else 的使用&quot;">​</a></h2><ul><li><p>PersonDao.java</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// org.springframework.data.repository.query.Param</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">selectMarriageable</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Param</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gender</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> gender </span><span style="color:#89DDFF;">);</span></span></code></pre></div></li><li><p>PersonDao.xml</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectMarriageable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        MATCH (n: person)</span></span>
<span class="line"><span style="color:#A6ACCD;">        WHERE 1 == 1 </span></span>
<span class="line"><span style="color:#A6ACCD;">        @if ( gender == &#39;F&#39; ) {</span></span>
<span class="line"><span style="color:#A6ACCD;">          AND n.person.age &gt;= 20</span></span>
<span class="line"><span style="color:#A6ACCD;">        @} else {</span></span>
<span class="line"><span style="color:#A6ACCD;">          AND n.person.age &gt;= 22</span></span>
<span class="line"><span style="color:#A6ACCD;">        @}</span></span>
<span class="line"><span style="color:#A6ACCD;">        RETURN n</span></span>
<span class="line"><span style="color:#A6ACCD;">        LIMIT 1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h2 id="switch-case的使用" tabindex="-1">switch case的使用 <a class="header-anchor" href="#switch-case的使用" aria-label="Permalink to &quot;switch case的使用&quot;">​</a></h2><ul><li><p>PersonDao.java</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// org.springframework.data.repository.query.Param</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">selectMarriageable</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Param</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gender</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> gender </span><span style="color:#89DDFF;">);</span></span></code></pre></div></li><li><p>PersonDao.xml</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectMarriageable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        MATCH (n: person)</span></span>
<span class="line"><span style="color:#A6ACCD;">        WHERE 1 == 1 </span></span>
<span class="line"><span style="color:#A6ACCD;">        @switch( gender ){</span></span>
<span class="line"><span style="color:#A6ACCD;">        @   case &#39;F&#39;:</span></span>
<span class="line"><span style="color:#A6ACCD;">                AND n.person.age &gt;= 20  </span></span>
<span class="line"><span style="color:#A6ACCD;">        @     break;</span></span>
<span class="line"><span style="color:#A6ACCD;">        @   case &#39;M&#39;:</span></span>
<span class="line"><span style="color:#A6ACCD;">                AND n.person.age &gt;= 22</span></span>
<span class="line"><span style="color:#A6ACCD;">        @     break;</span></span>
<span class="line"><span style="color:#A6ACCD;">        @   default:</span></span>
<span class="line"><span style="color:#A6ACCD;">                AND n.person.age &gt;= 24</span></span>
<span class="line"><span style="color:#A6ACCD;">        @}</span></span>
<span class="line"><span style="color:#A6ACCD;">        RETURN n</span></span>
<span class="line"><span style="color:#A6ACCD;">        LIMIT 1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li><li><blockquote><p><strong>注意</strong>: 此处放入 switch 的变量，不可为 null</p></blockquote></li></ul><h2 id="select-case-的使用" tabindex="-1">select case 的使用 <a class="header-anchor" href="#select-case-的使用" aria-label="Permalink to &quot;select case 的使用&quot;">​</a></h2><ul><li><p>PersonDao.java</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// org.springframework.data.repository.query.Param</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">selectByGender</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Param</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gender</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> gender </span><span style="color:#89DDFF;">);</span></span></code></pre></div></li><li><p>PersonDao.xml</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectMarriageable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        MATCH (n: person)</span></span>
<span class="line"><span style="color:#A6ACCD;">        WHERE 1 == 1 </span></span>
<span class="line"><span style="color:#A6ACCD;">        @select( gender ){</span></span>
<span class="line"><span style="color:#A6ACCD;">        @   case &#39;F&#39;, &#39;M&#39;:</span></span>
<span class="line"><span style="color:#A6ACCD;">                AND n.person.gender is not null</span></span>
<span class="line"><span style="color:#A6ACCD;">        @   default:</span></span>
<span class="line"><span style="color:#A6ACCD;">                AND n.person.gender is null</span></span>
<span class="line"><span style="color:#A6ACCD;">        @}</span></span>
<span class="line"><span style="color:#A6ACCD;">        RETURN n</span></span>
<span class="line"><span style="color:#A6ACCD;">        LIMIT 1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h2 id="decode-函数的使用" tabindex="-1">decode 函数的使用 <a class="header-anchor" href="#decode-函数的使用" aria-label="Permalink to &quot;decode 函数的使用&quot;">​</a></h2><ul><li><p>PersonDao.java</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// org.springframework.data.repository.query.Param</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Person</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">selectMarriageable</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Param</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gender</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> gender </span><span style="color:#89DDFF;">);</span></span></code></pre></div></li><li><p>PersonDao.xml</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectMarriageable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        MATCH (n: person)</span></span>
<span class="line"><span style="color:#A6ACCD;">        WHERE 1 == 1 </span></span>
<span class="line"><span style="color:#A6ACCD;">        \${ decode( gender, </span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;F&quot;, &quot;AND n.person.age &gt;= 20&quot;, </span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;M&quot;, &quot;AND n.person.age &gt;= 22&quot;, </span></span>
<span class="line"><span style="color:#A6ACCD;">          &quot;AND n.person.age &gt;= 24&quot; </span></span>
<span class="line"><span style="color:#A6ACCD;">        ) }</span></span>
<span class="line"><span style="color:#A6ACCD;">        RETURN n</span></span>
<span class="line"><span style="color:#A6ACCD;">        LIMIT 1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">select</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li></ul><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>到此，可用于条件判断的方式基本介绍完成。只能用于入参时的判断。返回值不能使用条件控制。</p>`,17),o=[e];function t(c,r,i,D,y,C){return a(),n("div",null,o)}const d=s(p,[["render",t]]);export{F as __pageData,d as default};
